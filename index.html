<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smith & Jacobs Law Group - AI Assistant</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap');
        body { 
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
        .animate-spin { animation: spin 1s linear infinite; }
    </style>
</head>
<body class="bg-transparent">
    <div id="root"></div>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        const { useState, useRef, useEffect } = React;

        // Icon Components
        const MessageCircle = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>
            </svg>
        );

        const X = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
        );

        const Send = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="22" y1="2" x2="11" y2="13"></line>
                <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
            </svg>
        );

        const Loader = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className="animate-spin">
                <line x1="12" y1="2" x2="12" y2="6"></line>
                <line x1="12" y1="18" x2="12" y2="22"></line>
                <line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line>
                <line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line>
                <line x1="2" y1="12" x2="6" y2="12"></line>
                <line x1="18" y1="12" x2="22" y2="12"></line>
                <line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line>
                <line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>
            </svg>
        );

        // Chatbot Component
        const Chatbot = () => {
            // ⬇️ PASTE YOUR GEMINI API KEY HERE ⬇️
            const API_KEY = 'AIzaSyBNAUHizflgLnhUSJ1fojgCMBG63XgqPoU';
            // ⬆️ PASTE YOUR GEMINI API KEY HERE ⬆️
            
            const [isOpen, setIsOpen] = useState(false);
            const [messages, setMessages] = useState([
                { role: 'assistant', content: "Hello! I'm here to help answer your questions about Smith & Jacobs Law Group. How can I assist you today?" }
            ]);
            const [input, setInput] = useState('');
            const [isLoading, setIsLoading] = useState(false);
            const messagesEndRef = useRef(null);

            const scrollToBottom = () => {
                messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
            };

            useEffect(() => {
                scrollToBottom();
            }, [messages]);

            const firmKnowledge = `You are a helpful AI assistant for Smith & Jacobs Law Group, a personal injury law firm in Jacksonville, Florida.

FIRM INFORMATION:
- Name: Smith & Jacobs Law Group
- Location: Jacksonville, Florida
- Phone: (904) 555-1234
- Experience: 25+ years combined experience
- Specialization: Personal Injury Law
- Awards: Voted Jacksonville's Best PI Lawyers 2024
- Results: Over $50 million recovered for clients
- Fee Structure: No fee unless we win (contingency basis)
- Consultation: FREE initial consultation

PRACTICE AREAS:
1. Car Accidents, 2. Truck Accidents, 3. Motorcycle Accidents, 4. Slip and Fall, 5. Premises Liability, 6. Wrongful Death, 7. Medical Malpractice, 8. Workers' Compensation, 9. Dog Bites, 10. Pedestrian Accidents

COMMON QUESTIONS:
Q: How much does it cost? A: We work on contingency - you pay nothing unless we win.
Q: How much is my case worth? A: It depends on medical bills, lost wages, pain and suffering. We provide estimates during free consultation.
Q: How long does a case take? A: Most cases settle within 6-18 months.
Q: What should I do after an accident? A: 1) Seek medical attention, 2) Document everything, 3) Don't talk to insurance without a lawyer, 4) Call us at (904) 555-1234.
Q: Do I have a case? A: If injured due to someone's negligence, likely yes. Free consultation to evaluate.

TONE: Professional, empathetic, helpful. Keep responses concise (2-4 sentences). Always encourage calling (904) 555-1234 or free consultation.`;

            const handleSend = async () => {
                if (!input.trim() || isLoading) return;
                if (API_KEY === 'YOUR_API_KEY_HERE') {
                    alert('Please add your Gemini API key in the code first. Look for API_KEY in the Chatbot component.');
                    return;
                }

                const userMessage = { role: 'user', content: input };
                setMessages(prev => [...prev, userMessage]);
                setInput('');
                setIsLoading(true);

                try {
                    const response = await fetch(
                        `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${API_KEY}`,
                        {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                contents: [{ parts: [{ text: firmKnowledge }, { text: `User question: ${input}\n\nProvide a helpful, professional response as the Smith & Jacobs Law Group chatbot. Keep it concise and empathetic.` }] }],
                                generationConfig: { temperature: 0.7, maxOutputTokens: 300 }
                            })
                        }
                    );

                    if (!response.ok) throw new Error('API request failed');

                    const data = await response.json();
                    const assistantMessage = { role: 'assistant', content: data.candidates[0].content.parts[0].text };
                    setMessages(prev => [...prev, assistantMessage]);
                } catch (error) {
                    console.error('Error:', error);
                    setMessages(prev => [...prev, { role: 'assistant', content: "I apologize, but I'm having trouble responding right now. Please call us directly at (904) 555-1234 for immediate assistance." }]);
                } finally {
                    setIsLoading(false);
                }
            };

            const quickQuestions = ["Do I have a case?", "How much does it cost?", "What should I do after an accident?", "How long does a case take?"];

            return (
                <>
                    {!isOpen && (
                        <button
                            onClick={() => setIsOpen(true)}
                            className="fixed bottom-6 right-6 bg-amber-500 text-slate-900 p-4 rounded-full shadow-2xl hover:bg-amber-600 transition-all hover:scale-110 z-50 flex items-center gap-2"
                        >
                            <MessageCircle size={28} />
                            <span className="font-semibold pr-2">Chat with us</span>
                        </button>
                    )}
                    
                    {isOpen && (
                        <div className="fixed bottom-6 right-6 w-96 h-[600px] bg-white rounded-2xl shadow-2xl flex flex-col z-50 border-2 border-amber-500">
                            <div className="bg-gradient-to-r from-slate-800 to-slate-900 text-white p-4 rounded-t-2xl flex justify-between items-center">
                                <div>
                                    <h3 className="font-bold text-lg">Smith & Jacobs Law Group</h3>
                                    <p className="text-xs text-amber-400">We're here to help 24/7</p>
                                </div>
                                <button onClick={() => setIsOpen(false)} className="hover:bg-slate-700 p-2 rounded-full transition-colors">
                                    <X size={20} />
                                </button>
                            </div>
                            
                            <div className="flex-1 overflow-y-auto p-4 space-y-4 bg-slate-50">
                                {messages.map((msg, idx) => (
                                    <div key={idx} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>
                                        <div className={`max-w-[80%] p-3 rounded-2xl ${msg.role === 'user' ? 'bg-amber-500 text-slate-900' : 'bg-white text-slate-800 border border-slate-200'}`}>
                                            <p className="text-sm leading-relaxed">{msg.content}</p>
                                        </div>
                                    </div>
                                ))}
                                
                                {isLoading && (
                                    <div className="flex justify-start">
                                        <div className="bg-white border border-slate-200 p-3 rounded-2xl">
                                            <Loader size={20} />
                                        </div>
                                    </div>
                                )}
                                
                                <div ref={messagesEndRef} />
                            </div>
                            
                            {messages.length === 1 && (
                                <div className="px-4 pb-2 space-y-2">
                                    <p className="text-xs text-slate-600 font-semibold">Quick questions:</p>
                                    <div className="grid grid-cols-2 gap-2">
                                        {quickQuestions.map((q, idx) => (
                                            <button
                                                key={idx}
                                                onClick={() => setInput(q)}
                                                className="text-xs bg-white border border-amber-500 text-slate-700 px-3 py-2 rounded-lg hover:bg-amber-50 transition-colors text-left"
                                            >
                                                {q}
                                            </button>
                                        ))}
                                    </div>
                                </div>
                            )}
                            
                            <div className="p-4 border-t border-slate-200 bg-white rounded-b-2xl">
                                <div className="flex gap-2">
                                    <input
                                        type="text"
                                        value={input}
                                        onChange={(e) => setInput(e.target.value)}
                                        onKeyPress={(e) => e.key === 'Enter' && handleSend()}
                                        placeholder="Ask us anything..."
                                        className="flex-1 px-4 py-3 border border-slate-300 rounded-full focus:outline-none focus:border-amber-500 text-sm"
                                        disabled={isLoading}
                                    />
                                    <button
                                        onClick={handleSend}
                                        disabled={isLoading || !input.trim()}
                                        className="bg-amber-500 text-slate-900 p-3 rounded-full hover:bg-amber-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                                    >
                                        <Send size={20} />
                                    </button>
                                </div>
                                <p className="text-xs text-center text-slate-500 mt-2">
                                    Call us: <span className="font-semibold text-amber-600">(904) 555-1234</span>
                                </p>
                            </div>
                        </div>
                    )}
                </>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<Chatbot />);
    </script>
</body>
</html>
